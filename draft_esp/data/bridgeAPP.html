<!--
bridgeAPP     tell the user to switch NETWORK, note down static IP and connect to the linked page containing the MecFES app
              It asks user to:
              1.  Copy MyStaticIP
              2.  Click link to serversite
              3.  Change network into SSID one.
-->
<!DOCTYPE HTML><html>
<head>
  <title>MeCFES: Connessione completata!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css">
  </head><body>
  <h2> Come avviare l'applicazione</h2>
  <p>1- Connettiti alla rete <b><span id="SSID">%SSID%</span></b> con il tuo dispositivo.</p>
<br>
  <p>2- Visita il <a href="#" id="URL">sito</a> dedicato a MeCFES.</p>
<br>
<p>3- Inserisci l'indirizzo IP: <b><span id="IP">%IP%</span></b></p>
 <br>

<script>
var str1 = "http://thorsen.it/public/lm2020/lm_webapp/index.php?ws=";
var str2;



setInterval(function() {
  // Call a function repetatively with 2 Second interval
  getDataIP();
  getDataSSID();
  var res = str1.concat(str2);
  document.getElementById("URL").href = res;

}, 2000); //2000mSeconds update rate


function getDataIP() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("IP").innerHTML =
      this.responseText;
      str2=String(this.responseText);
    }
  };
  xhttp.open("GET", "ip", true);
  xhttp.send();
}

function getDataSSID() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("SSID").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "ssid", true);
  xhttp.send();
}

</script>
</body>
</html>
