<!--
onConnection    page show the connected WiFi SSID and MyStaticIP, 
                inviting the user to start the connection in AP mode.
-->
<!DOCTYPE HTML><html>
<head>
  <title>MeCFES: Connessione completata!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css">
  </head><body>
  <h2> MeCFES: Connessione completata!</h2>
  <p>La connessione alla rete wifi e' stata completata con successo. Ecco i dati relativi a SSID ed indirizzo IP della rete. </p>
  <p><u>Non dimenticarti di annotarli, saranno necessari per la lettura dei dati dal dispositivo MeCFES.</u></p>
 <br>
  <h3>SSID WiFi:</h3>
  <h1><span id="SSID">%SSID%</span></h1>
 <h3>IP:</h3>
 <h1><span id="IP">%IP%</span></h1>
 <p><a href="/startapp"><button class="button">AVVIA APP</button></a></p>
<script>

setInterval(function() {
  // Call a function repetatively with 2 Second interval
  getDataIP();
  getDataSSID();
}, 500); //2000mSeconds update rate

function getDataIP() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("IP").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "ip", true);
  xhttp.send();
}

function getDataSSID() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("SSID").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "ssid", true);
  xhttp.send();
}
</script>
</body>
</html>
